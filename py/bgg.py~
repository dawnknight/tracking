import os, glob,pickle
import scipy as sp
import numpy as np
from PIL import Image
import scipy.ndimage as nd

path = '/home/andyc/image/IR/EVENING/'
imlist = sorted(glob.glob( os.path.join(path, '*.jpg')))
im = nd.imread(imlist[0])[:,:,0]
bg = np.zeros(im.shape)
for i in range(len(imlist)): 
    print i
    im0 = np.array(Image.open(imlist[i]).convert('L')).astype(np.float)
    bg[:,:] =bg+im0
bg = bg/(len(imlist))
pickle.dump(bg,open("bg_all.pkl","wb"),True) 
